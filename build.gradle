plugins {
    id "com.jfrog.bintray" version "1.7"
    id 'java'
    id 'maven'
    id 'maven-publish'
}

group = 'com.imgix'
version = '2.3.0'

description = """Imgix Java Client"""

sourceCompatibility = 11
targetCompatibility = 11

repositories {
    maven { url "https://repo.maven.apache.org/maven2" }
}

dependencies {
    testImplementation group: 'junit', name: 'junit', version:'4.12'
    testImplementation group: 'org.hamcrest', name: 'hamcrest-library', version:'1.3'
}

bintray {
  user = System.getenv('BINTRAY_USER')
  key = System.getenv('BINTRAY_KEY')
  pkg {
    userOrg = 'imgix'
    repo = 'maven'
    name = 'imgix-java'
    licenses = ['BSD 2-Clause']
    vcsUrl = 'https://github.com/imgix/imgix-java.git'
    version {
      name = '2.3.0'
    }
    configurations = ['archives']
  }
}


// `classifier = 'sources'` is a deprecated feature--removed!
task sourcesJar(type: Jar, dependsOn: classes) {
    archiveClassifier.set("sources")
    from sourceSets.main.allSource
}

// `classifier = 'javadoc'` is a deprecated feature--removed!
task javadocJar(type: Jar, dependsOn: javadoc) {
    archiveClassifier.set("javadoc")
    from javadoc.destinationDir
}

task testUTF32(type: Test) {
    jvmArgs "-Dfile.encoding=UTF-32"
}

artifacts {
    archives sourcesJar
    archives javadocJar
}
